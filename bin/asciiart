#!/usr/bin/env ruby

require 'uri'
require 'tempfile'
require 'net/http'
require 'asciiart'

if ARGV[0].nil?
  puts "Specify a path or URL to convert\n"
  exit
end

if ARGV[0] =~ URI::regexp
  temp_file = Tempfile.new(File.basename(ARGV[0]))
  puts "\n...hold up, downloading...\n"
  temp_file << Net::HTTP.get_response(URI.parse(ARGV[0])).body
  temp_file.close
  
  puts AsciiArt.new(temp_file.path).to_ascii_art
  temp_file.delete
else
  file_to_convert = AsciiArt.new(ARGV[0])
  puts file_to_convert.to_ascii_art
end